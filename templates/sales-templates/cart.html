{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ | ASQ</title>
  <style>
    body {
      font-family: "Cairo", sans-serif;
      background: #f7f9fc;
      color: #333;
      margin: 0;
    }
    main { padding: 20px; max-width: 900px; margin: auto; }
    h2 { color: #0066ff; text-align: center; }

    table {
      width: 100%; border-collapse: collapse;
      background: white; border-radius: 12px;
      overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    th, td { padding: 12px; text-align: center; border-bottom: 1px solid #eee; }
    th { background: #0066ff; color: white; }
    input[type="number"] {
      width: 60px; text-align: center; border: 1px solid #ccc;
      border-radius: 6px; padding: 4px;
    }
    .btn-remove {
      background: #ff3333; border: none; color: white;
      padding: 5px 10px; border-radius: 6px; cursor: pointer;
    }
    .btn-remove:hover { background: #cc0000; }

    .btn-update {
      background: #00cc66; border: none; color: white;
      padding: 5px 10px; border-radius: 6px; cursor: pointer;
    }
    .btn-update:hover { background: #00994d; }

    .cart-summary {
      margin-top: 20px;
      text-align: center;
      font-size: 18px;
      color: #222;
    }
    .checkout-btn {
      background: linear-gradient(135deg, #00ccff, #0066ff);
      color: white; border: none;
      padding: 12px 25px; border-radius: 10px;
      font-size: 18px; cursor: pointer; margin-top: 20px;
    }
    .checkout-btn:hover { background: linear-gradient(135deg, #0066ff, #0040cc); }
  </style>
</head>
<body>
  {% include 'header.html' %}
  <main>
    <h2>ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>

    {% if cart_items %}
    <table>
      <thead>
        <tr>
          <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
          <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
          <th>Ø§Ù„Ø³Ø¹Ø±</th>
          <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
          <th>ØªØ­Ø¯ÙŠØ«</th>
          <th>Ø¥Ø²Ø§Ù„Ø©</th>
        </tr>
      </thead>
      <tbody>
        {% for item in cart_items %}
        <tr>
          <td>{{ item.name }}</td>

          <td>
            <form method="post" action="{% url 'sales:update_cart_item' item.id %}" style="display:inline;">
              {% csrf_token %}
              <input type="number" name="quantity" value="{{ item.quantity }}" min="1">
          </td>

          <td>{{ item.price }} Ø±.Ø³</td>
          <td>{{ item.item_total|floatformat:2 }} Ø±.Ø³</td>

          <td>
              <button type="submit" class="btn-update">ğŸ”„</button>
            </form>
          </td>

          <td>
            <a href="{% url 'sales:remove_from_cart' item.id %}" onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ');">
              <button class="btn-remove">âœ–</button>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="cart-summary">
      ğŸ§¾ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ: <strong>{{ total_price|floatformat:2 }}</strong> Ø±.Ø³
    </div>

    <div style="text-align:center; display:flex; justify-content:center; gap:20px; margin-top:25px;">
    <!-- ğŸ”™ Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³ÙˆÙ‚ -->
      <button
        class="checkout-btn"
        style="background: linear-gradient(135deg, #999, #666);"
        onclick="window.location.href='/'">
        ğŸ›ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³ÙˆÙ‚
      </button>

    <!-- ğŸ’³ Ø²Ø± Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ -->
      <button class="checkout-btn" onclick="window.location.href='{% url 'sales:checkout' %}'">
    ğŸ’³ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨
      </button>
    </div>
    {% else %}
      <p style="text-align:center;">ğŸ›ï¸ Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠÙ‹Ø§</p>
    {% endif %}
  </main>
  {% include 'footer.html' %}
</body>
</html>
